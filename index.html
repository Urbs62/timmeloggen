<!doctype html>
<html lang="sv">
  <title>Faktura – Jubrion AB (vTEST-1)</title>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Timmeloggen</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#60a5fa" />
  <link rel="icon" sizes="192x192" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

</head>
<body>

  <header class="topbar">
    <div class="brand">
      <div class="logo">
        <img src="icons/timmeloggen-logo.svg" alt="Timmeloggen" class="logoImg" />
      </div>
    <div>
      <div class="title">Timmeloggen</div>
      <br>
    </div>
  </div>

  </header>

  <nav class="tabs">
    <button class="tab active" data-tab="accounts">Konton</button>
    <button class="tab" data-tab="log">Tidsloggning</button>
    <button class="tab" data-tab="history">Sammanställning</button>
    <button class="tab" data-tab="help" disabled>Kommer snart</button>
  </nav>

  <main class="container">

    <!-- Konton -->
    <section class="panel active" id="tab-accounts">
      <div class="card">
        <h2>Konton / projekt</h2>

        <div class="row">
          <div class="grow">
            <input id="accountName" type="text" placeholder="Ex: 3010, Projekt X, Kund Y..." />
          </div>
          <button id="addAccountBtn" class="primary">Lägg till</button>
        </div>

        <div class="list" id="accountList"></div>
      </div>
    </section>

    <!-- Tidsloggning -->
    <section class="panel" id="tab-log">
      <div class="grid">
        <div class="card">
          <h2>Dagen</h2>
      
        <div class="row">
          <div class="grow">
            <label>Aktiv dag</label>
            <input id="activeDate" type="date" />
          </div>
        </div>

        <div class="row">
          <button id="startDayBtn">Starta dag</button>
          <button id="endDayBtn" class="secondary">Avsluta dag</button>
        </div>

          <hr class="sep" />

          <div class="grid">
            <div>
              <label>Start</label>
              <div class="pill" id="dayStartView">—</div>
            </div>
            <div>
              <label>Slut</label>
              <div class="pill" id="dayEndView">—</div>
            </div>
          </div>

          <div class="grid" style="margin-top:10px;">
            <div>
              <label>Rast/lunch</label>
              <div class="pill" id="breakView">0:00</div>
            </div>
            <div>
              <label>Arbetstid</label>
              <div class="pill" id="workView">0:00</div>
            </div>
          </div>

          <hr class="sep" />

          <h3>Skapa tidsrad</h3>

          <div class="grid">
            <div>
              <label>Starttid</label>
              <input id="slotStart" type="time" />
            </div>
            <div>
              <label>Stopptid</label>
              <input id="slotEnd" type="time" />
            </div>
          </div>

          <div style="margin-top:10px;">
            <label>Konto</label>
            <select id="slotAccount"></select>
          </div>

          <div style="margin-top:10px;">
            <label>Aktivitet (fritext)</label>
            <input id="slotText" type="text" placeholder="Vad gjorde du?" />
          </div>

          <div class="checklist" style="margin-top:10px;">
            <div class="rowline">
              <label class="badge">Avdrag</label>
              <label style="display:flex; gap:10px; align-items:center; margin:0;">
                <input id="slotIsBreak" type="checkbox" />
                <span class="muted">Rast/lunch (dras av)</span>
              </label>

              <div style="flex:1"></div>
              <button id="addSlotBtn" class="primary">Lägg till</button>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Dagens rader</h2>
          <div class="hint" id="dayKeyView"></div>

          <div class="list" id="slotList"></div>

          <div class="actions">
            <button id="clearTodayBtn" class="danger">Rensa dagen</button>
            <button id="exportCsvBtn">Exportera CSV</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Sammanställning -->
    <section class="panel" id="tab-history">
      <div class="card">
        <h2>Sammanställning</h2>
       
        <div class="row">
          <div class="grow">
            <label>Period</label>
            <select id="periodType">
              <option value="day">Dag</option>
              <option value="week">Vecka</option>
              <option value="month">Månad</option>
            </select>
          </div>

          <div class="grow">
            <label>Datum</label>
            <input id="periodDate" type="date" />
          </div>

          <button id="refreshHistoryBtn" class="primary">Uppdatera</button>
        </div>

        <hr />

        <h3>Fakturaunderlag</h3>
        <p class="muted">Export för vald månad och konto (endast arbetstid, ej rast/lunch).</p>

        <div class="row">
          <div class="grow">
            <label>Konto</label>
            <select id="invoiceAccount"></select>
          </div>

          <div class="grow">
            <label>Månad</label>
            <input id="invoiceMonth" type="month" />
          </div>

          <button id="exportInvoiceCsvBtn" class="secondary">Exportera fakturaunderlag (CSV)</button>
          <button id="printInvoiceBtn" class="secondary">PDF (Skriv ut)</button>
          <button id="openInvoiceHtmlBtn" class="secondary">Öppna faktura (HTML)</button>

          <div class="muted tiny" style="margin-top:10px;">
            <strong>PDF (Skriv ut) i Timmeloggen</strong><br>
            Spara som PDF<br>
            Android sparar i <em>Nedladdningar</em><br>
            Mina filer → Senaste filer<br>
            Dela → Google Drive
          </div>

        </div>

        <div class="grid">
          <div class="card" style="margin:0;">
            <h3>Översikt</h3>
            <div id="overviewBox"></div>
          </div>

          <div class="card" style="margin:0;">
            <h3>Per konto</h3>
            <div id="perAccountBox"></div>
          </div>
        </div>

        <hr class="sep" />

        <h3>Poster i perioden</h3>
        <div class="list" id="historyList"></div>
      </div>
    </section>

  </main>
  <br>
   <p class="muted">Data sparas lokalt (localStorage). GitHub Pages ger versionshantering men inte synk mellan datorer.</div>
  <br>

  <script src="app.js" defer></script>
  
  <div id="printArea" aria-hidden="true"></div>
</body>
</html>



















